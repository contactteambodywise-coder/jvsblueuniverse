<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Breakout Atari Style</title>
<style>
body { margin:0; overflow:hidden; background:black; }
canvas { display:block; margin:0 auto; background:#000; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = 800;
canvas.height = 600;

// PADDLE
const paddle = {
  width: 100,
  height: 15,
  x: canvas.width/2 - 50,
  y: canvas.height - 30,
  speed: 8,
  dx: 0
};

// BALL
const ball = {
  x: canvas.width/2,
  y: canvas.height - 45,
  radius: 10,
  speed: 5,
  dx: 3,
  dy: -3
};

// BRICKS
const brickRowCount = 5;
const brickColumnCount = 8;
const brickWidth = 80;
const brickHeight = 20;
const brickPadding = 10;
const brickOffsetTop = 50;
const brickOffsetLeft = 35;

const bricks = [];
for(let c=0;c<brickColumnCount;c++){
  bricks[c] = [];
  for(let r=0;r<brickRowCount;r++){
    bricks[c][r] = { x:0, y:0, status:1 };
  }
}

// CONTROLS
document.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft') paddle.dx = -paddle.speed;
  if(e.key==='ArrowRight') paddle.dx = paddle.speed;
});
document.addEventListener('keyup', e=>{
  if(e.key==='ArrowLeft' || e.key==='ArrowRight') paddle.dx = 0;
});

// DRAW FUNCTIONS
function drawPaddle(){
  ctx.fillStyle = 'white';
  ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
}

function drawBall(){
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fillStyle = 'red';
  ctx.fill();
  ctx.closePath();
}

function drawBricks(){
  for(let c=0;c<brickColumnCount;c++){
    for(let r=0;r<brickRowCount;r++){
      if(bricks[c][r].status===1){
        const brickX = c*(brickWidth+brickPadding) + brickOffsetLeft;
        const brickY = r*(brickHeight+brickPadding) + brickOffsetTop;
        bricks[c][r].x = brickX;
        bricks[c][r].y = brickY;
        ctx.fillStyle = 'lime';
        ctx.fillRect(brickX, brickY, brickWidth, brickHeight);
      }
    }
  }
}

// COLLISION
function collision(){
  for(let c=0;c<brickColumnCount;c++){
    for(let r=0;r<brickRowCount;r++){
      const b = bricks[c][r];
      if(b.status===1){
        if(ball.x > b.x && ball.x < b.x+brickWidth &&
           ball.y > b.y && ball.y < b.y+brickHeight){
          ball.dy = -ball.dy;
          b.status = 0;
        }
      }
    }
  }

  // Paddle
  if(ball.y + ball.radius > paddle.y && 
     ball.x > paddle.x && ball.x < paddle.x + paddle.width){
    ball.dy = -ball.dy;
    // optional: add dx change based on hit position
    let hitPos = ball.x - (paddle.x + paddle.width/2);
    ball.dx = hitPos*0.1;
  }

  // Walls
  if(ball.x + ball.radius > canvas.width || ball.x - ball.radius <0) ball.dx = -ball.dx;
  if(ball.y - ball.radius <0) ball.dy = -ball.dy;

  // Bottom (lose)
  if(ball.y + ball.radius > canvas.height){
    alert("Game Over!");
    document.location.reload();
  }
}

// UPDATE
function update(){
  paddle.x += paddle.dx;
  if(paddle.x<0) paddle.x=0;
  if(paddle.x+paddle.width>canvas.width) paddle.x=canvas.width-paddle.width;

  ball.x += ball.dx;
  ball.y += ball.dy;

  collision();
}

// DRAW
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawPaddle();
  drawBall();
  drawBricks();
}

// LOOP
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>